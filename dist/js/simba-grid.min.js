/**
 * Simba Grid
 * @name        simba-grid
 * @description Infinite grid scroll
 * @link        https://github.com/Rodgath/simba-grid
 * @author      Rodgath, https://Rodgath.com
 * @version     v1.0.0
 * @created     July 22, 2023
 * @updated     August 04, 2023
 * @copyright   Copyright (C) 2023-2023, Rodgath
 * @license     MIT
 * @licenseMIT  https://github.com/Rodgath/simba-grid/blob/main/LICENSE
 * @demoExample https://rodgath.github.io/simba-grid/demo/
 */
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function simbaGrid(e,n){n||(t=e.dataset.simbaGrid)&&(n=JSON.parse(t)),n=Object.assign({},{width:1200,cols:3,rows:3,rowHeight:280,gap:0,scrollSpeed:1,pauseOnHover:!0,shuffle:!1,animationStyle:"zoom"},n),o=e instanceof HTMLElement||e instanceof Node?e:document.querySelector(e);var o,t=function(){var e,t=document.createElement("div");e=(n.hasOwnProperty("images")&&Array.isArray(n.images)&&0<n.images.length&&n.images.forEach(function(e){var t=document.createElement("img");t.src=e.src,t.alt=e.title,o.appendChild(t)}),o.querySelectorAll("*"));for(var r=0;r<e.length;r++)t.appendChild(e[r]);return t.style.display="none",document.body.appendChild(t),Array.from(t.querySelectorAll("*"))}();var i=parseInt(n.gap,10),r=parseInt(n.rowHeight,10),l=parseInt(n.width,10),e=parseInt(n.rows,10),s=parseInt(n.cols,10),a=e*s,c=t.length+(u=1,c=2,Math.floor(Math.random()*(c-u+1)+u)),c=(u=a,Math.max(Math.ceil(c/u),2)*u),d=c/a,u=function(e,t){if(e.length){for(var r=[],a=e.length,n=Math.ceil(t/a),o=0;o<n;o++)r.push.apply(r,_toConsumableArray(e));return r.slice(0,t)}}(n.shuffle?function(e){for(var t=e.slice(),r=t.length-1;0<r;r--){var a=Math.floor(Math.random()*(r+1)),n=[t[a],t[r]];t[r]=n[0],t[a]=n[1]}return t}(t):t,c),t=function(e,t){for(var r=[],a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}(u,a),c=2*t.length;(u=o).classList.add("simba-grid-wrapper"),u.style.width="100%",u.style.whiteSpce="nowrap",u.style.overflow="hidden",u.style.display="grid",u.style.gap="".concat(i,"px"),u.style.gridTemplateColumns="repeat(".concat(c,", 1fr)"),u.style.gridAutoRows="".concat(r*e,"px"),u.style.height="".concat((r+i)*e-i,"px"),t.forEach(function(e,t){e=e,(a=document.createElement("div")).classList.add("simba-grid-container"),a.style.minWidth="".concat(l,"px"),(n=document.createElement("div")).classList.add("simba-grid"),n.style.display="grid",n.style.gridTemplateColumns="repeat(".concat(s,", 1fr)"),n.style.gridAutoRows="".concat(r,"px"),n.style.gap="".concat(i,"px"),e.forEach(function(e,t){var r=document.createElement("div");r.classList.add("simba-grid-item"),r.style.overflow="hidden","IMG"===e.tagName?(r.style.backgroundImage="url(".concat(e.currentSrc,")"),r.style.backgroundSize="cover",r.style.backgroundPosition="center"):(e.style.width="100%",e.style.height="100%",e.style.whiteSpace="normal",r.innerHTML=e.outerHTML),n.appendChild(r),a.appendChild(n)});var a,n,e=A(a);o.appendChild(e)});for(var y=o,m=y.children,f=[],p=0;p<m.length;p++){var h=m[p].cloneNode(!0);f.push(h)}f.forEach(function(e){y.appendChild(e)});for(var g=y.querySelectorAll(".simba-grid-item"),b=g.length-1;0<=b;b--)!function(){var e=g[b],t="",r="";switch(n.animationStyle){case"zoom":t="scale(0)",r="scale(1)";break;case"rotate":t="rotate(+20deg)",r="rotate(0deg)";break;case"zoomRotate":t="rotate(+20deg) scale(0)",r="rotate(0deg) scale(1)";break;default:r=t=""}"zoom"!==n.animationStyle&&"rotate"!==n.animationStyle&&"zoomRotate"!==n.animationStyle||(e.style.opacity=0,e.style["-webkit-transform"]=t,e.style.transform=t,e.style.transitionProperty="opacity, transform",e.style.transitionDuration="0.4s, 0.4s",e.style.transitionTimingFunction="linear, linear",e.style.transitionDelay="0s, 0s",setTimeout(function(){e.style.opacity=1,e.style["-webkit-transform"]=r,e.style.transform=r},200*(g.length-b-1)))}();for(var v=0;v<m.length;v++)A(m[v]);function A(e){var t=e.querySelector(".simba-grid"),r=t.querySelectorAll(".simba-grid-item"),a=Array.from(r);for(a.sort(function(e,t){e=Math.floor(a.indexOf(e)/n.cols);return Math.floor(a.indexOf(t)/n.cols)-e}),r.forEach(function(e){return e.remove()}),a.forEach(function(e){return t.appendChild(e)});e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(t),e}var S=!1;(function e(){var t,r=document.querySelector(".simba-grid-container");S||(t=r.offsetWidth*d+d*i,o.scrollLeft<=t-r.parentNode.offsetWidth?o.scrollLeft+=t:o.scrollLeft-=n.scrollSpeed),requestAnimationFrame(e)})(),o.addEventListener("mouseenter",function(){return S=!!n.pauseOnHover}),o.addEventListener("mouseleave",function(){return S=!1})}var simbaGridScrollElements=document.querySelectorAll("[data-simba-grid]");simbaGridScrollElements.forEach(function(e){return simbaGrid(e)});